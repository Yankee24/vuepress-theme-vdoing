(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{769:function(t,s,a){"use strict";a.r(s);var e=a(21),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h4",{attrs:{id:"_1-准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作"}},[t._v("#")]),t._v(" 1. 准备工作")]),t._v(" "),a("p",[t._v("准备三台已经安装了CentOS7系统的虚拟机，分别是"),a("code",[t._v("master")]),t._v("，"),a("code",[t._v("slave1")]),t._v("，"),a("code",[t._v("slave2")]),t._v("。")]),t._v(" "),a("p",[t._v("三台虚拟机配置如下(以下配置只做参考，如果自己的电脑不允许的情况下，也可以适当的调整)：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("主机名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("机器配置")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("存储容量")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("用户")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("master")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("4G内存，2核，2CPU")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("50G")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("hadoop")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("slave1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1G内存，1核，1CPU")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("50G")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("hadoop")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("slave2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1G内存，1核，1CPU")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("50G")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("hadoop")])])])]),t._v(" "),a("h4",{attrs:{id:"_2-配置sudo权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置sudo权限"}},[t._v("#")]),t._v(" 2. 配置"),a("code",[t._v("sudo")]),t._v("权限")]),t._v(" "),a("p",[t._v("三台都需要配置"),a("code",[t._v("hadoop")]),t._v("用户的"),a("code",[t._v("sudo")]),t._v("权限，否则之后使用"),a("code",[t._v("hadoop")]),t._v("用户时可能会出现的权限问题，无法解决。(三台配置方法相同)")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. 刚刚重启虚拟机之后，首先使用root账户登录，然后执行visudo命令\n2. 进入vi编辑器之后，使用命令[:set nu]可以显示行号\n3. 在第100行之后新插入一行内容[hadoop\tALL=(ALL)\tALL]\n4. 之后在第111行后插入一行内容[hadoop\tALL=(ALL)\tNOPASSWD: ALL]\n5. 之后保存并切换到hadoop用户\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://typora-image.test.upcdn.net/images/20200809154733.jpg",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_3-修改ip地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改ip地址"}},[t._v("#")]),t._v(" 3. 修改IP地址")]),t._v(" "),a("p",[t._v("查看自己虚拟机的"),a("code",[t._v("VMnet8")]),t._v("(也就是NAT模式)的网卡的地址，设置三台虚拟机的网络IP在同一个网段内，并且都是静态IP地址。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("主机名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("IP地址")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("master")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("192.168.21.210")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("slave1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("192.168.21.211")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("slave2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("192.168.21.212")])])])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. 使用sudo权限编辑[/etc/sysconfig/network-scripts/ifcfg-ens33]文件，修改如下：\n\tTYPE=Ethernet\n\tPROXY_METHOD=none\n\tBROWSER_ONLY=no\n\tBOOTPROTO=static[修改]\n\tDEFROUTE=yes\n\tIPV4_FAILURE_FATAL=no\n\tIPV6INIT=yes\n\tIPV6_AUTOCONF=yes\n\tIPV6_DEFROUTE=yes\n\tIPV6_FAILURE_FATAL=no\n\tIPV6_ADDR_GEN_MODE=stable-privacy\n\tNAME=ens33\n\tUUID=4a123d67-9c45-43c9-b7fa-b26c245a5446\n\tDEVICE=ens33\n\tONBOOT=yes[修改]\n\tGATEWAY=192.168.21.2[新增]\n\tIPADDR=192.168.21.210[新增]\n\tNETMASK=255.255.255.0[新增]\n\tDNS1=8.8.8.8[新增]\n\tDNS2=114.114.114.114[新增]\n2. 保存后重新启动网络服务[sudo systemctl restart network]\n3. 使用[ip addr]查看IP地址，是否已经修改成功\n4. 使用[ping www.baidu.com]测试外网是否可以访问\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br")])]),a("h4",{attrs:{id:"_4-添加主机名映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加主机名映射"}},[t._v("#")]),t._v(" 4. 添加主机名映射")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("使用sudo权限编辑[/etc/hosts]文件，修改如下：\n\t192.168.21.210\tmaster\n\t192.168.21.211\tslave1\n\t192.168.21.212\tslave2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"_5-配置各个机器之间的免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置各个机器之间的免密登录"}},[t._v("#")]),t._v(" 5. 配置各个机器之间的免密登录")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. 使用[ssh-keygen -t rsa]生成各个机器的私钥和公钥(需要在三台机器上执行)\n2. 使用[ssh-copy-id username@hostname]即可将本地的公钥发送到另外一台机器(需要在三台机器上执行)\n\tssh-copy-id hadoop@master\n\tssh-copy-id hadoop@slave1\n\tssh-copy-id hadoop@slave2\n3. 之后在三台机器上使用[ssh localhost]，因为第一次使用需要输入(yes/no)，防止后面产生不必要的麻烦\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h4",{attrs:{id:"_6-关闭防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-关闭防火墙"}},[t._v("#")]),t._v(" 6. 关闭防火墙")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("使用[systemctl stop firewalld]关闭防火墙，使用[systemctl disable firewalld]让防火墙开机不自启\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_7-安装jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-安装jdk"}},[t._v("#")]),t._v(" 7. 安装JDK")]),t._v(" "),a("p",[t._v("上传JDK的压缩包，上传到[/opt/software]目录下，解压到[/opt/apps]目录下，同时记得修改[/opt]目录的归属。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. 修改[/opt]目录的所属用户组和用户[sudo chown -R hadoop:hadoop /opt]\n2. 解压JDK的压缩包[tar -zvxf xxxx.tar.gz -C /opt/apps]\n3. 配置环境变量（这里建议修改hadoop用户的用户变量，如果出错还可以使用root账户进行修改）\n4. 修改[/home/hadoop/.bash_profile]文件，添加以下内容：\n\tJAVA_HOME=/opt/apps/jdk1.8.0_162\n\tPATH=$JAVA_HOME/bin:$PATH\n\texport JAVA_HOME PATH\n5. 执行[source ~/.bash_profile]使环境变量生效\n6. 使用[java -version]测试是否生效即可\n7. 使用[scp]命令将jdk发送到其他两台服务器\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);